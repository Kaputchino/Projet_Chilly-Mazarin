input a;
input b = true;
input cin = false;
input sel;

gate halfadder(x, y)(sum, carry) {
  sum   = x + y - (x - y);
  carry = x - y;
}

gate mux2(a0, a1, s)(out) {
  out = (s - a1) + ((!s) - a0);
}

gate fulladder(x, y, c)(sum, carry) {
  ha1 = halfadder(x, y);
  t   = ha1.sum;
  ha2 = halfadder(t, c);
  sum   = ha2.sum;
  carry = ha1.carry + ha2.carry;
}

ha   = halfadder(a, b);
fa   = fulladder(a, b, cin);
selM = mux2(ha.sum, fa.sum, sel);

print("a:", a);
print("b:", b);
print("cin:", cin);
print("sel:", sel);
print("ha.sum:", ha.sum);
print("ha.carry:", ha.carry);
print("fa.sum:", fa.sum);
print("fa.carry:", fa.carry);
print("mux:", selM.out);

write("all_signals.csv",
      a, b, cin, sel, ha, fa, selM.out);
